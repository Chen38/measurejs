/*! measure.min.js v1.0.0 | Barry Chen */
!function(){var a=this,b=function(a){switch(this._obj=document.querySelector(a.target),this._width=a.size,this._way=a.way,this._isNavbar=a.isNavbar,this._unit=a.unit,this._radius=2,this._left=10,this._top=10,this._color="#FF5555",this._isNavbar?this._navBarHeight=128:this._navBarHeight=0,this._unit){case"px":this._isHundred=1;break;case"rem":this._isHundred=100}},c=b.prototype,d=document.createElement("div");d.classList.add("data"),d.innerHTML='<p><span class="p">top</span>: <span class="top"></span><br><span class="p">left</span>: <span class="left"></span></p>',document.body.appendChild(d);var e=document.querySelector(".data"),f=document.querySelector(".top"),g=document.querySelector(".left"),h=e.offsetWidth,i=e.offsetHeight;c.whichPhone=function(){var a=this._width,b=document.createElement("meta");switch(b.name="viewport",a){case 640:b.content="width="+a+",target-densitydpi=device-dpi,maximum-scale=1,user-scalable=no",this._iPhone=5,this._height=1136;break;case 750:b.content="width="+a+",target-densitydpi=device-dpi,maximum-scale=1,user-scalable=no",this._iPhone=6,this._height=1334}document.getElementsByTagName("head")[0].appendChild(b)},c.createCanvas=function(){this.whichPhone();var a=this._obj;this._canvas=document.createElement("canvas"),this._canvas.width=this._width,this._canvas.height=this._height,this._canvas.style.width=this._width+"px",this._canvas.style.height=this._height+"px",this._canvas.id="measure",a.appendChild(this._canvas),this._image=a.childNodes[1],a.childNodes[1].style.display="none"},c.checkPosition=function(a,b,c,d){var e,f,g=this._width-(2*this._left+h),j=this._height-(2*this._top+i);return a>g&&b<=j&&(e=a-this._left-h,f=d),b>j&&a<=g&&(e=c,f=b-this._top-i),a>g&&b>j&&(e=a-this._left-h,f=b-this._top-i),a<=g&&b<=j&&(e=c,f=d),e+this._left+h>=this._width&&(e=this._width-this._left-h),e<=this._left&&(e=this._left),f+this._top+i>=this._height&&(f=this._height-this._left-i),f<=this._navBarHeight+this._top&&(f=this._navBarHeight+this._top),{x:e,y:f}},c.setStyle=function(a,b){a.style.transform=a.style.webkitTransform="translate("+b.x+"px,"+b.y+"px)"},c.keyControl=function(a,b,c){function d(b,c){return b>=k&&(b=k),b<=m&&(b=m),c<=n&&(c=n),c>=l&&(c=l),a.save(),a.clearRect(0,0,i._width,i._height),a.drawImage(i._image,0,0),a.beginPath(),a.arc(b,c,i._radius,0,2*Math.PI),a.fill(),a.restore(),{x:b,y:c}}var h,i=this,j=1,k=i._width,l=i._height,m=0,n=128,o=b,p=c,q=o+i._left,r=p+i._top,s=Math.round(o)/i._isHundred,t=Math.round(p-i._navBarHeight)/i._isHundred,u=!1,v={moveLeft:function(){o-=j,o<=m&&(o=m),q=o+i._left,h=d(o,p),s=Math.round(h.x)/i._isHundred},moveUp:function(){p-=j,p<=n&&(p=n),r=p+i._top,h=d(o,p),t=Math.round(h.y-i._navBarHeight)/i._isHundred},moveRight:function(){o+=j,o>=k&&(o=k),q=o+i._left,h=d(o,p),s=Math.round(h.x)/i._isHundred},moveDown:function(){p+=j,p>=l&&(p=l),r=p+i._top,h=d(o,p),t=Math.round(h.y-i._navBarHeight)/i._isHundred}};document.body.onkeydown=function(a){var d=a.keyCode;switch(d){case 37:case 65:v.moveLeft();break;case 38:case 87:v.moveUp();break;case 39:case 68:v.moveRight();break;case 40:case 83:v.moveDown()}var h=i.checkPosition(o,p,q,r);g.innerHTML=s+i._unit,b>=0&&c>=i._navBarHeight?(f.innerHTML=t+i._unit,i.setStyle(e,h)):(f.innerHTML=0+i._unit,e.style.transform=e.style.webkitTransform="translate("+h.x+"px,"+(i._navBarHeight+i._top)+"px)")},document.body.onkeyup=function(){u||console.info(e.innerText)}},c.measure=function(){var a=this;a.createCanvas();var b=a._canvas.getContext("2d");a._image.onload=function(){b.drawImage(a._image,0,0)},b.fillStyle=a._color,a._canvas.addEventListener("touchstart",function(c){var d=c.touches[0].pageX,h=c.touches[0].pageY;a.keyControl(b,d,h),b.clearRect(0,0,a._width,a._height),b.drawImage(a._image,0,0),b.beginPath();var i=Math.round(d)/a._isHundred,j=Math.round(h-a._navBarHeight)/a._isHundred;g.innerHTML=i+a._unit;var k=a._left+d,l=a._top+h,m=a.checkPosition(d,h,k,l);d>=0&&h>=a._navBarHeight?(b.arc(d,h,a._radius,0,2*Math.PI),f.innerHTML=j+a._unit,a.setStyle(e,m)):(f.innerHTML=0+a._unit,b.arc(d,a._navBarHeight,a._radius,0,2*Math.PI),e.style.transform=e.style.webkitTransform="translate("+m.x+"px,"+(a._navBarHeight+a._top)+"px)"),e.style.opacity=1,b.fill(),console.info(e.innerText)},!1)},a.Measure=b}();