/*! Measure.js v1.2.0 | (c) Barry Chen */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Measure=t()}(window,function(){function e(){this.events={}}function t(t){if(e.call(this),this.target=document.getElementById(t.target),!this.target)throw new Error("target is required.");if(this.src=t.src,!this.src)throw new Error("src is required.");if(this.edition=t.edition,!this.edition)throw new Error("edition is required.");if(this.haveNavbar=t.haveNavbar,!this.haveNavbar)throw new Error("haveNavbar is required.");this.resolution={},this.unit=t.unit?t.unit:"px",this.lineColor=t.lineColor?t.lineColor:"#DD4B39",this.enableKeyControl=!!t.enableKeyControl&&t.enableKeyControl}e.prototype.on=function(e,t){if(!this.events[e])return void(this.events[e]=[t]);this.events[e].push(t)},e.prototype.off=function(e,t){var n=this.events[e];if(n)for(var o=n.length,i=0;i<o;i++)n[i]===t&&(n[i]=null)},e.prototype.trigger=function(e){var t=this,n=this.events[e];if(n)for(var o=n.length,i=0;i<o;i++)n[i]&&n[i].apply(t,[].slice.call(arguments,1))};var n={width:640,height:1136},o={width:750,height:1334},i={5:n,"5s":n,se:n,6:o,"6s":o,7:o,8:o};return t.prototype=new e,t.prototype.constructor=t,t.prototype.measure=function(){function e(){if(F)throw new Error("You already in measuring. Please use method measure() once.");F=!0;var e=this;e.resolution=i[y(e.edition)],e.canvas=u(e.src,e.resolution),e.target.appendChild(e.canvas),g=e.lineColor,x=e.resolution.width,b=e.resolution.height,E=e.unit,w=f(e.haveNavbar),C=w,m=c(e.unit),I.x=0,I.y=C,e.enableKeyControl&&(d(document.body,"keydown",o),d(document.body,"keyup",function(){e.trigger("measure",Math.floor(I.x/m),Math.floor((I.y-w)/m))})),d(e.canvas,"touchstart",n),d(e.canvas,"touchend",function(){e.trigger("measure",Math.floor(I.x/m),Math.floor((I.y-w)/m))})}function t(e){var t,n,o=x-(2*q+T),i=b-(2*B+N);return e.x>o&&e.y<=i&&(t=e.x-q-T,n=e.y+B),e.y>i&&e.x<=o&&(t=e.x+q,n=e.y-B-N),e.x>o&&e.y>i&&(t=e.x-q-T,n=e.y-B-N),e.x<=o&&e.y<=i&&(t=e.x+q,n=e.y+B),t+q+T>=x&&(t=x-q-T),t<=q&&(t=q),n+B+N>=b&&(n=b-q-N),n<=w+B&&(n=w+B),{x:t,y:n}}function n(e){var n=e.touches[0];I.x=n.pageX,I.y=n.pageY,I.y<=w&&(I.y=w),K=t(I),l()}function o(e){switch(e.keyCode){case 38:case 87:a();break;case 37:case 65:r();break;case 40:case 83:h();break;case 39:case 68:s()}K=t(I),l()}function r(){I.x-=M,I.x<=S&&(I.x=S)}function a(){I.y-=M,I.y<=C&&(I.y=C)}function s(){I.x+=M,I.x>=x&&(I.x=x)}function h(){I.y+=M,I.y>=b&&(I.y=b)}function l(){var e=K.x,t=K.y,n=I.x,o=I.y;v.clearRect(0,0,x,b),v.drawImage(p,0,0),v.strokeStyle=g,v.lineWidth=1,v.beginPath(),v.moveTo(0,o),v.lineTo(x,o),v.moveTo(n,0),v.lineTo(n,b),v.stroke(),v.strokeStyle="#000000",v.fillStyle="#F1F1F1",v.strokeRect(e,t,T,N),v.fillRect(e+1,t+1,T-2,N-2),v.font="26px Menlo, Consolas",v.fillStyle="#6C76E1",v.textBaseline="top",v.fillText("left: "+Math.floor(n/m)+E+";",e+10,t+12),v.fillText("top:  "+Math.floor((o-w)/m)+E+";",e+10,t+48)}function u(e,t){var n=document.createElement("style");n.innerHTML="html,body{width:100%;height:100%;margin:0;padding:0;overflow:hidden;}",k.appendChild(n);var o=document.createElement("meta");o.name="viewport",o.content="width="+t.width+",target-densitydpi=device-dpi,maximum-scale=1,user-scalable=no",k.appendChild(o);var i;return i=document.createElement("canvas"),i.width=t.width,i.height=t.height,i.style.width=t.width+"px",i.style.height=t.height+"px",i.style.display="block",v=i.getContext("2d"),p=new Image,p.onload=function(){var e=this.width,n=this.height;if(v.drawImage(p,0,0),e!==t.width&&n!==t.height)throw new Error("You'd better use the same image as your iPhone resolution.")},p.src=e,i}function c(e){var t;switch(e){case"px":t=1;break;case"rem":t=100}return t}function d(e,t,n){e.addEventListener(t,n,!1)}function f(e){return e?128:0}function y(e){return e.toLowerCase()}var v,p,g,m,w,x,b,C,E,k=document.getElementsByTagName("head")[0],M=1,T=250,N=90,q=12,B=12,I={},K={},S=0,F=!1;return e}(),t});