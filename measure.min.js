/*! Measure.js v1.2.0 | (c) Barry Chen */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Measure=t()}(window,function(){function e(){this.events={}}function t(t){if(e.call(this),this.target=document.getElementById(t.target),!this.target)throw new Error("target is required.");if(this.src=t.src,!this.src)throw new Error("src is required.");if(this.edition=t.edition,!this.edition)throw new Error("edition is required.");if(this.haveNavbar=t.haveNavbar,!this.haveNavbar)throw new Error("haveNavbar is required.");this.resolution={},this.unit=t.unit?t.unit:"px",this.lineColor=t.lineColor?t.lineColor:"#DD4B39",this.enableKeyControl=!!t.enableKeyControl&&t.enableKeyControl}e.prototype.on=function(e,t){if(!this.events[e])return void(this.events[e]=[t]);this.events[e].push(t)},e.prototype.off=function(e,t){var o=this.events[e];if(o)for(var n=o.length,i=0;i<n;i++)o[i]===t&&(o[i]=null)},e.prototype.trigger=function(e){var t=this,o=this.events[e];if(o)for(var n=o.length,i=0;i<n;i++)o[i]&&o[i].apply(t,[].slice.call(arguments,1))};var o={width:640,height:1136},n={width:750,height:1334},i={5:o,"5s":o,se:o,6:n,"6s":n,7:n,8:n};return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.measure=function(){function e(){if(F)throw new Error("You already in measuring. Please use method measure() once.");F=!0;var e=this;e.resolution=i[y(e.edition)],e.canvas=c(e.src,e.resolution),e.target.appendChild(e.canvas),g=e.lineColor,x=e.resolution.width,b=e.resolution.height,E=e.unit,w=f(e.haveNavbar),C=w,m=u(e.unit),I.x=0,I.y=C,e.enableKeyControl&&(d(document.body,"keydown",n),d(document.body,"keyup",function(){e.trigger("measure",Math.floor(I.x/m),Math.floor((I.y-w)/m))})),d(e.canvas,"touchstart",o),d(e.canvas,"touchend",function(){e.trigger("measure",Math.floor(I.x/m),Math.floor((I.y-w)/m))})}function t(e){var t,o,n=x-(2*q+T),i=b-(2*B+N);return e.x>n&&e.y<=i&&(t=e.x-q-T,o=e.y+B),e.y>i&&e.x<=n&&(t=e.x+q,o=e.y-B-N),e.x>n&&e.y>i&&(t=e.x-q-T,o=e.y-B-N),e.x<=n&&e.y<=i&&(t=e.x+q,o=e.y+B),t+q+T>=x&&(t=x-q-T),t<=q&&(t=q),o+B+N>=b&&(o=b-q-N),o<=w+B&&(o=w+B),{x:t,y:o}}function o(e){var o=e.touches[0];I.x=o.pageX,I.y=o.pageY,I.y<=w&&(I.y=w),K=t(I),l()}function n(e){switch(e.keyCode){case 38:case 87:a();break;case 37:case 65:r();break;case 40:case 83:h();break;case 39:case 68:s()}K=t(I),l()}function r(){I.x-=M,I.x<=S&&(I.x=S)}function a(){I.y-=M,I.y<=C&&(I.y=C)}function s(){I.x+=M,I.x>=x&&(I.x=x)}function h(){I.y+=M,I.y>=b&&(I.y=b)}function l(){var e=K.x,t=K.y,o=I.x,n=I.y;p.clearRect(0,0,x,b),p.drawImage(v,0,0),p.strokeStyle=g,p.lineWidth=1,p.beginPath(),p.moveTo(0,n),p.lineTo(x,n),p.moveTo(o,0),p.lineTo(o,b),p.stroke(),p.strokeStyle="#000000",p.fillStyle="#F1F1F1",p.strokeRect(e,t,T,N),p.fillRect(e+1,t+1,T-2,N-2),p.font="26px Menlo, Consolas",p.fillStyle="#6C76E1",p.textBaseline="top",p.fillText("left: "+Math.floor(o/m)+E+";",e+10,t+12),p.fillText("top:  "+Math.floor((n-w)/m)+E+";",e+10,t+48)}function c(e,t){var o=document.createElement("style");o.innerHTML="html,body{width:100%;height:100%;margin:0;padding:0;overflow:hidden;}",k.appendChild(o);var n=document.createElement("meta");n.name="viewport",n.content="width="+t.width+",target-densitydpi=device-dpi,maximum-scale=1,user-scalable=no",k.appendChild(n);var i;return i=document.createElement("canvas"),i.width=t.width,i.height=t.height,i.style.width=t.width+"px",i.style.height=t.height+"px",i.style.display="block",p=i.getContext("2d"),v=new Image,v.onload=function(){var e=this.width,o=this.height;if(p.drawImage(v,0,0),e!==t.width&&o!==t.height)throw new Error("You'd better use the same image as your iPhone resolution.")},v.src=e,i}function u(e){var t;switch(e){case"px":t=1;break;case"rem":t=100}return t}function d(e,t,o){e.addEventListener(t,o,!1)}function f(e){return e?128:0}function y(e){return e.toLowerCase()}var p,v,g,m,w,x,b,C,E,k=document.getElementsByTagName("head")[0],M=1,T=250,N=90,q=12,B=12,I={},K={},S=0,F=!1;return e}(),t});